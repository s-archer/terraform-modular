{
    "class": "AS3",
    "action": "deploy",
    "persist": true,
    "declaration": {
        "class": "ADC",
        "schemaVersion": "3.22.0",
        "label": "Demo AWS v1.1",
        "remark": "Simple AS3 template for Terraform expansion",
        "demo_tenant": {
            "class": "Tenant",
            "app3": {
                "class": "Application",
                "HTTPS_app3": {
                    "class": "Service_HTTPS",
                    "virtualPort": 443,
                    "redirect80": false,
                    "virtualAddresses": [
                        "10.0.1.37"
                    ],
                    "persistenceMethods": [],
                    "profileMultiplex": {
                        "bigip": "/Common/oneconnect"
                    },
                    "pool": "app3_pool",
                    "serverTLS": "app3Tls",
                    "policyWAF": {
                        "use": "owaspPolicy-app3" 
                    }
                },             
                "app3Tls": {
                    "class": "TLS_Server",
                    "certificates": [
                        {
                            "certificate": "app3_cert"
                        }
                    ],
                    "tls1_0Enabled": false,
                    "tls1_1Enabled": false,
                    "cipherGroup": {
                        "bigip": "/Common/f5-secure"
                    }
                },  
                "app3_cert": {
                  "class": "Certificate",
                  "certificate": "-----BEGIN CERTIFICATE-----\nMIIFVDCCBDygAwIBAgITAPp/K9qicAy07qRps4apU7+szzANBgkqhkiG9w0BAQsF\nADBZMQswCQYDVQQGEwJVUzEgMB4GA1UEChMXKFNUQUdJTkcpIExldCdzIEVuY3J5\ncHQxKDAmBgNVBAMTHyhTVEFHSU5HKSBBcnRpZmljaWFsIEFwcmljb3QgUjMwHhcN\nMjEwMzE2MjA1ODE1WhcNMjEwNjE0MjA1ODE1WjAaMRgwFgYDVQQDEw9hcHAzLmFy\nY2hmNS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDKTScWAnjd\nMhx5ea9VyBTJrQPRGgzfo5j4cIGR5tNYw+QGUQMCcuwrNPG/rr12cs/XiBQ96dyT\n7u6BesYL/fQo9Yz18ecPzvfwvSQXsNoEiSbXSTSZWG58WNb8joSzbmsq3fUUpq0s\nUmcoGmMNUlXndAcvnqAUA+oUJGFuGV5EjUQVevbsNrBT1KELq4wA6yA0JmokvIYY\nIHq+O0UuEjamhNLggvDWCWjPz5NxUg5wUlPXyQSNm+5RZi4O/9ZShUiuPv6UQ304\nNDJCq+9WSOz1u345P17lh5jrk3kM3+5Ejtk7gzp+5t3DYnFozux0l+G1Qq/7mbCY\nzqeGNsxNo8lfAgMBAAGjggJSMIICTjAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFCCw\nn18sdhX4g3OFV94ugIRcSB8LMB8GA1UdIwQYMBaAFN5yekjfMcOmUN+fhSPfVzdL\nXS5lMF0GCCsGAQUFBwEBBFEwTzAlBggrBgEFBQcwAYYZaHR0cDovL3N0Zy1yMy5v\nLmxlbmNyLm9yZzAmBggrBgEFBQcwAoYaaHR0cDovL3N0Zy1yMy5pLmxlbmNyLm9y\nZy8wGgYDVR0RBBMwEYIPYXBwMy5hcmNoZjUuY29tMEwGA1UdIARFMEMwCAYGZ4EM\nAQIBMDcGCysGAQQBgt8TAQEBMCgwJgYIKwYBBQUHAgEWGmh0dHA6Ly9jcHMubGV0\nc2VuY3J5cHQub3JnMIIBBAYKKwYBBAHWeQIEAgSB9QSB8gDwAHYAsMyD5aX5fWuv\nfAnMKEkEhyrH6IsTLGNQt8b9JuFsbHcAAAF4PQvv3AAABAMARzBFAiEAhYa2PKQr\ny6LM9ul4I4nwdat2HM2YOzMyQGR/LYlesTcCIGa6G97/e9l7ZwwNuedDss3t6QqQ\nq21SPZUuPq837ctNAHYA3Zk0/KXnJIDJVmh9gTSZCEmySfe1adjHvKs/XMHzbmQA\nAAF4PQvzuAAABAMARzBFAiAeZt683o2qAvKd9FaigmuvuDmasY0NzFjcvBQ+3Mkg\nTAIhAIza8XConqe2uQuoMl+tVysmkae9o4AJVoL7Vn1ZtNHZMA0GCSqGSIb3DQEB\nCwUAA4IBAQA3q6oO018MMl2/uIwqV0DjTbO/8awYXeSyWyI4V265mBlbJrIu/HjN\n2YwSGt2hY90ep2Fe4lm88DDWzIeomqjr8qUJf9qWbcovhwQ3gj+Pn2rJc+TJVsd7\nq/MvufWuvn2dbWk5WurZTxcGcgoK24+iNHmC7Th/FLevjRdwUkmNFYNL1LVoHxD1\n6wYR9ZDnrKCbT+XOIl7PQ0+i8s3EfmowiQqARG7ktNnJO6iWdW13POPhxhOGBFLx\nzUO5odK9EgN3twfmREnCx5/TC68r/p4T4P8fxxnHrvTCMk1B5BGVsTTQY3/s9vu1\n+mKAjxB6h2VARxUDZxITqkRSQSKarxwM\n-----END CERTIFICATE-----",
                  "privateKey": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAyk0nFgJ43TIceXmvVcgUya0D0RoM36OY+HCBkebTWMPkBlED\nAnLsKzTxv669dnLP14gUPenck+7ugXrGC/30KPWM9fHnD8738L0kF7DaBIkm10k0\nmVhufFjW/I6Es25rKt31FKatLFJnKBpjDVJV53QHL56gFAPqFCRhbhleRI1EFXr2\n7DawU9ShC6uMAOsgNCZqJLyGGCB6vjtFLhI2poTS4ILw1gloz8+TcVIOcFJT18kE\njZvuUWYuDv/WUoVIrj7+lEN9ODQyQqvvVkjs9bt+OT9e5YeY65N5DN/uRI7ZO4M6\nfubdw2JxaM7sdJfhtUKv+5mwmM6nhjbMTaPJXwIDAQABAoIBAQC9Gu3khx8QNh2j\n9/nMiCHWfCLLPjy2eSkvY4vbJRh/K25l8SiNC3x0zyMEeYWlyaE76npxfcCxkHHn\nGysyXov0FcVUynGht2jR4xxwAONrxgFG0amXhrCREEK3B0pIqHkJMz47taq/ea/w\nLupUs5iVqUJmYzNkQlx3w6JH1vLlxDQ2VIaL8/4f9PmxaT0txqXHH7aFIf40i4L4\ndyMyXT6XeIT4X9Toh3GLXEwNLNylPGoHlJf4riSJOBkguZ2WYY+lEB460Jiw6L/Q\n71oikl3WJcyA/6kZPJ2ObDNz1qZffuILuXH1cePBTlMif1QowN8DrheLMR3gUHKB\nxzM+l1IhAoGBAPu2a5VMXtn+QMS1nWwqzU/rTo/Hxmt5b69HPGfaHnkSotoEPQTJ\nN7NdV5NoMS21nYpQ3Ke1XqZYYIl1ctmoSv/qoXdoIcZ4SaaNCSe70qj2vklPj/04\n0OZvdY7KG9HCY6eNgRN618F+l1ne/iC4f61kyvfUEk3lAbS1jmquKEWHAoGBAM2/\nRwWwexFyik0WEN8cfv88+kMyWBUPU5GBXehyEABzpr+qgCbvkxxGaI7PUMJMkOcp\ntX9MKpr1Hc2dfgz8vKdLMURu+M5FFnHk9bLkyJXysDS1e7CQ7zMC3di+Q90qgE0F\n6CdFbrDPjadeR3qGLPtwXSD+lRzPgSaFszvH59NpAoGAa28c1AhYo6qFcnAh1L0g\nDHBeg7e81LpsFN/OxHSwdPSjVXJhqN1JTOEWM/BQrTXLG/IPe/VJhK5L5d+fOY8/\nE6PNbu2fHNrSdKfVtIPSEhPee+PdjTLm1rPT9TIGVa0mY6ld4jaYSBoD93PZ+5VD\nyXovtz9o4J5R8BNdyeKzhZkCgYEAn708JPyp8BffrI3PN4nmR8BOBVHW9TLbDQNF\np6y3I8Km2fREXvZuXuuDTi1DZDcR4YeOdHDsOzbHltYKAYdP6QsGCz2lSnB1RqQe\n5m+eFF1B1Qp6J9G/BPnax+agxduzlRla7vKHSBs8vY8DK+t0jRrmEzHVD3NDsGbp\niyZfpNECgYAr2zClR+PSuI3DrED0reAvujjTnBjvyKvVJdwyWPhRWjZOcyH/uxTd\nrHQy9NxlVqKHaOggIceKf9cS1iOwndA/bzhct2eh3rhNW2oVG4+L9eZ46a3HRLJT\nBU1790J9ZMhCxNmCveAusXj5z0Lcz6f+xjdEnSD8jR94M7aTpDLyhA==\n-----END RSA PRIVATE KEY-----\n"
                },
                "app3_pool": {
                    "class": "Pool",
                    "monitors": [
                        "http"
                    ],
                    "members": [
                        {
                            "servicePort": 80,
                            "addressDiscovery": "aws",
                            "updateInterval": 1,
                            "tagKey": "Name",
                            "tagValue": "nginx-autoscale",
                            "addressRealm": "private",
                            "region": "eu-west-1"
                        }
                    ]
                },
                "owaspPolicy-app3": {
                    "class": "WAF_Policy",
                    "url": "https://raw.githubusercontent.com/s-archer/terraform-modular/main/declarative_waf_module/waf_policies/rendered_policy_with_suggestions_1.json",
                    "ignoreChanges": false,
                    "enforcementMode": "blocking"
                }
            },
            "app4": {
                "class": "Application",
                "HTTPS_app4": {
                    "class": "Service_HTTPS",
                    "virtualPort": 443,
                    "redirect80": false,
                    "virtualAddresses": [
                        "10.0.1.69"
                    ],
                    "persistenceMethods": [],
                    "profileMultiplex": {
                        "bigip": "/Common/oneconnect"
                    },
                    "pool": "app4_pool",
                    "serverTLS": "app4Tls",
                    "policyWAF": {
                        "use": "owaspPolicy-app4" 
                    }
                },             
                "app4Tls": {
                    "class": "TLS_Server",
                    "certificates": [
                        {
                            "certificate": "app4_cert"
                        }
                    ],
                    "tls1_0Enabled": false,
                    "tls1_1Enabled": false,
                    "cipherGroup": {
                        "bigip": "/Common/f5-secure"
                    }
                },  
                "app4_cert": {
                  "class": "Certificate",
                  "certificate": "-----BEGIN CERTIFICATE-----\nMIIFVTCCBD2gAwIBAgITAPq+P80Hi63wgb56Q0rx4uffAjANBgkqhkiG9w0BAQsF\nADBZMQswCQYDVQQGEwJVUzEgMB4GA1UEChMXKFNUQUdJTkcpIExldCdzIEVuY3J5\ncHQxKDAmBgNVBAMTHyhTVEFHSU5HKSBBcnRpZmljaWFsIEFwcmljb3QgUjMwHhcN\nMjEwMzE2MjA1ODE1WhcNMjEwNjE0MjA1ODE1WjAaMRgwFgYDVQQDEw9hcHA0LmFy\nY2hmNS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC7jVDjvqH2\nT9SFRQPdJGp8ylVgvq8Em1yzuneo9ZxuBWtvEIg5o4YYCwTgtvSWYoMY/zW7xAjg\n7Gc7vuEfENjqCcFLWwKdf0jakjWAxGjHhK0SvVx23zYqBupIdkReHKJH+mOOMBvr\nuZJAjn6vpQvNaip+nfLvkobxaAEUtIMpqf/qR96QHShdSsL4R2mh1NX+5vOF5CVD\nRG2kpb5h2+kjV8NQEIhzHtychVbi5LwK3vgHnzNxdbiBjdKFne+7g+BDIUz9KsLq\neIHw+2lKpkWi2vKCnPWypiWWbks5ZZ9krm9Q+Ai79vEY2YpSjIkQ0fQUXNUKit/8\n3+Y2I8yNb8+bAgMBAAGjggJTMIICTzAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFDrH\nKuP+43Y2+gmY1wxjydw++rPiMB8GA1UdIwQYMBaAFN5yekjfMcOmUN+fhSPfVzdL\nXS5lMF0GCCsGAQUFBwEBBFEwTzAlBggrBgEFBQcwAYYZaHR0cDovL3N0Zy1yMy5v\nLmxlbmNyLm9yZzAmBggrBgEFBQcwAoYaaHR0cDovL3N0Zy1yMy5pLmxlbmNyLm9y\nZy8wGgYDVR0RBBMwEYIPYXBwNC5hcmNoZjUuY29tMEwGA1UdIARFMEMwCAYGZ4EM\nAQIBMDcGCysGAQQBgt8TAQEBMCgwJgYIKwYBBQUHAgEWGmh0dHA6Ly9jcHMubGV0\nc2VuY3J5cHQub3JnMIIBBQYKKwYBBAHWeQIEAgSB9gSB8wDxAHcAFuhpwdGV6tfD\n+Jca4/B2AfeM4badMahSGLaDfzGoFQgAAAF4PQvv3wAABAMASDBGAiEAjwMx+TjY\nupqUEsDO8my7VJscnuYPZtYN7OvXja+G4dECIQCTgYnKl9TZbgUAbynhmLlEpOaY\nq7abNlefI9D1oSrFRAB2AN2ZNPyl5ySAyVZofYE0mQhJskn3tWnYx7yrP1zB825k\nAAABeD0L87MAAAQDAEcwRQIgAa6LoJ7LKuWYdoDZhLcFBigk90ao0iBM3sto74+j\nNAoCIQDlII3EmclV3ubPvKLyX8D0FThVPwWvHH8s6eHryWgn9jANBgkqhkiG9w0B\nAQsFAAOCAQEAg1U6QqjBk1Sg3Ubq5+nGlSZcmMYXeWeRYcc2rUfxn7IJ/gKBTrPy\n6/nJhoeXlZzxdU2mkqkcpOj2DIimPriEQJ89OWBL/N+SQbM6q6zMCy9f5dHo0npA\nhMg3hs74E4Bm6YxuKLb1bqkBlxMIroYrxP1R9hEGppqa3+DZf+j+OJlLD6yEhPno\n/vZRgROj5JwmDA52gIwZchzbFHt2VYkV1RiVWTwOiYq0Tu96CvReklAEPlwdeBj6\nRmuoMV6tiAe3nTpsHaDftP2w0Dv9rsUXIL/0ONyAlZ+RdZS8W/sdMarXavPYT+2C\n8JEO6Me1CH1U7Hmxcl2kBzJ+zm+5006t0Q==\n-----END CERTIFICATE-----",
                  "privateKey": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEAu41Q476h9k/UhUUD3SRqfMpVYL6vBJtcs7p3qPWcbgVrbxCI\nOaOGGAsE4Lb0lmKDGP81u8QI4OxnO77hHxDY6gnBS1sCnX9I2pI1gMRox4StEr1c\ndt82KgbqSHZEXhyiR/pjjjAb67mSQI5+r6ULzWoqfp3y75KG8WgBFLSDKan/6kfe\nkB0oXUrC+EdpodTV/ubzheQlQ0RtpKW+YdvpI1fDUBCIcx7cnIVW4uS8Ct74B58z\ncXW4gY3ShZ3vu4PgQyFM/SrC6niB8PtpSqZFotrygpz1sqYllm5LOWWfZK5vUPgI\nu/bxGNmKUoyJENH0FFzVCorf/N/mNiPMjW/PmwIDAQABAoIBAQCxI1WE5KYAB4IH\npRlzIlPZLRjaWP7gcQRrU/B0ihWG7GN98LVZCxM5Xh7rRqFX8A816sULZKmmFmGi\nUjQ5rSXSVghUbc7YhkF+/py908PKvYrhqivMsiFsLD/W1KzZ3l1/cgPZZaLZTtnN\nU0hgCJhPGLiuAexTTadaFgr/TUacb64dQN32vzooruO2IXhoQG99IwMVNjAWZ46v\nEQ8R7OewG9pVLBvZb2CXlh/3AUhAcKFIHPia8D6kJCH1GpC+ggJVpDjDKdvTPVj5\nXBE01G5gKiU2YWlNSFQVzkDBvRsMtTHb/YfteUXaaI78O8Bb9FS1C0V4wXBOcpNt\n8lAl0RmxAoGBAMiwomZ6+bTzKq2UINNo0eSihm0mjXJSSRigCjMD+4keyk/G0yQd\nvHhxxD/WU3NfgNqiD6SSseCg/6fXtk+YM+2Wk4a1liSu8PbEaEPqimc7i5WHKn2w\npKPi0jB7/4CEBfBXWURu1DetuTihTGXPVuyVfMhteWlOmjmyuPOj6G3fAoGBAO89\nwNn+9ykaKsCcUZsFe9e4bjBUXXwSqD82Fv2C//U57nnoyLlaByeUz4jDbJohRtTL\nDZttTIjOgNtwmewNCJfPqA9rl8P4vTe34cpst2Vi8t0ZmEWKHAlZJB8beSRnYL7C\n5baZaXujfvlwSkBjzAGXm4qIeewSoxHhavAa/x3FAoGAPeAn0gzsXFv0tpvLGyNg\nQ2vQomqWhb7VBqChRGVf8kDqA3q7spDwgPoilcQQ6qtxYPdCd207JpS8/hTGAvhc\nWk5oocnuxtShOpQHyZjQn09+k9Wexi3mNRlD0OsKNad+5UEpJq49BAWt68Xfdixd\nEohsdqc6Hbu8VTnDSGsqyGUCgYBVo+F5J9AKIpfTQyHjQF9IpXisTEb6tyMLHa21\nKkO94PMBKNdRomyVOqvf5TTnJ6pXWiiQzttqzaFK7E/tM+0zit46RuWY/V2eqHBn\nKeusm3McuqDLo9jNb9+CUy9WXLtBDjt01g3weGJnoE60JgVNPJwtRxV98F33dJ33\nPXK9kQKBgQDF0hqUX5F1GC8+PHjGFt9s9rec00re1HiFehr+FW0dsPq9wzTh9Iw6\neCxkMIMvtHVniaKU34PgUCLixrJLzwwPIaLuotQiEjcm2DQiB8POSa14Y03aXyOg\n5XoccqCBQzX4QrioZdAeHzMAEVWb1se6/dDWTQAZvIPB+2mFnMwTQw==\n-----END RSA PRIVATE KEY-----\n"
                },
                "app4_pool": {
                    "class": "Pool",
                    "monitors": [
                        "http"
                    ],
                    "members": [
                        {
                            "servicePort": 80,
                            "addressDiscovery": "aws",
                            "updateInterval": 1,
                            "tagKey": "Name",
                            "tagValue": "nginx-autoscale",
                            "addressRealm": "private",
                            "region": "eu-west-1"
                        }
                    ]
                },
                "owaspPolicy-app4": {
                    "class": "WAF_Policy",
                    "url": "https://raw.githubusercontent.com/s-archer/terraform-modular/main/declarative_waf_module/waf_policies/rendered_policy_with_suggestions_1.json",
                    "ignoreChanges": false,
                    "enforcementMode": "blocking"
                }
            }
        }
    }
}